"""
AI 服务提示词模板集合

所有 LLM 调用的 prompt 模板统一管理在这里，方便修改和维护。
"""
from llama_index.core import PromptTemplate


# ==================== 标签生成 ====================

TAG_GENERATION_TEMPLATE = PromptTemplate(
    template="""你是一个个人备忘录应用的「标签助手」。

现在有一条备忘录，请根据它的**正文内容**、**非图片附件信息**，以及（如果有的话）**图片内容**来生成合适的标签。

【备忘录正文】
\"\"\"{content}\"\"\"

【非图片附件列表说明】
{non_image_desc}

【用户在整个应用中常用的标签（优先复用这些）】
{reuse_candidates}

【这条备忘录目前已有的标签】
{existing_tags}

核心原则：
1. **具体胜过抽象** - 优先提取具体名称：
   - 宠物名（"小黑"、"旺财"）比类别（"狗"）重要
   - 产品型号（"iPhone 15"、"MacBook Pro"）比类别（"手机"）重要
   - 人名（"李总"）、公司名（"阿里"）、书名（"三体"）都要提取
   - 如果正文有"小黑#狗"，提取"小黑"，不要输出"狗"

2. **复用避免碎片** - 标签池里有就用原词：
   - 池里有"阅读"，就不要写"读书"、"看书"等变体
   - 池里有"工作"，就不要创造"工作记录"、"工作笔记"
   - 语义完全相同才复用，不同就创建新的

3. **类型化敏感信息** - 敏感内容标注类型而非具体值：
   - 银行卡 → 输出"卡号"（不输出具体卡号）
   - API密钥 → 输出"API Key"（不输出密钥本身）
   - 密码 → 输出"密码"（不输出密码内容）

4. **控制数量** - 少而精：
   - 目标 2-3 个标签，最多 {max_tags} 个
   - 宁缺毋滥，只要最关键的信息

5. **格式要求**：
   - 每个标签 1～6 个字
   - 不带 # 号和其他符号
   - 不要重复已有标签
   - 只输出标签，逗号分隔，无解释

关键：记住具体名称永远比分类更有价值！
"""
)
